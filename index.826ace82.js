class e{constructor(e,t){const s=document.getElementById(e);if(!s)throw"최상위 컨테이너가 없어 UI를 진행하지 못합니다.";this.container=s,this.template=t,this.renderTemplate=t,this.htmlList=[]}updateView(){this.container.innerHTML=this.renderTemplate,this.renderTemplate=this.template}addHtml(e){this.htmlList.push(e)}getHtml(){const e=this.htmlList.join("");return this.clearHtmlList(),e}setTemplatedata(e,t){this.renderTemplate=this.renderTemplate.replace(`{{__${e}__}}`,t)}clearHtmlList(){this.htmlList=[]}}class t{async request(e){const t=await fetch(e);return await t.json()}}class s{async getData(){return this.request("https://api.hnpwa.com/v0/news/1.json")}}class a{async getData(e){return await this.request("https://api.hnpwa.com/v0/item/@id.json".replace("@id",e))}}function n(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((s=>{const a=Object.getOwnPropertyDescriptor(t.prototype,s);a&&Object.defineProperty(e.prototype,s,a)}))}))}n(s,[t,class{printHello(){console.log("Hello")}}]),n(a,[t]);const i=new class{constructor(){this.feeds=[],this._currentPage=1}get currentPage(){return this._currentPage}set currentPage(e){this._currentPage=e}get nextPage(){return this._currentPage+1}get prevPage(){return this._currentPage>1?this._currentPage-1:1}get numberOfFeed(){return this.feeds.length}get hasFeeds(){return this.feeds.length>0}getAllFeeds(){return this.feeds}getFeed(e){return this.feeds[e]}setFeeds(e){this.feeds=e.map((e=>({...e,read:!1})))}makeRead(e){const t=this.feeds.find((t=>t.id===e));t&&(t.read=!0)}},r=new class{constructor(){location.hash.split("/");window.addEventListener("hashchange",this.route.bind(this)),this.routeTable=[],this.defaultRoute=null}setDefaultPage(e){this.defaultRoute={path:"",page:e}}addRoutePath(e,t){this.routeTable.push({path:e,page:t})}route(){const e=location.hash;if(""===e&&this.defaultRoute)this.defaultRoute.page.render();else for(const t of this.routeTable)if(e.indexOf(t.path)>=0){t.page.render();break}}},d=new class extends e{constructor(e,t){super(e,'\n    <div class="bg-gray-600 min-h-screen">\n      <div class="bg-white text-xl">\n        <div class="mx-auto px-4">\n          <div class="flex justify-between items-center py-6">\n            <div class="flex justify-start">\n              <h1 class="font-extrabold">Hacker News</h1>\n            </div>\n            <div class="item-center justify-end">\n              {{__prev_page__}}\n              {{__next_page__}}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="p-4 text-2xl text-gray-700">\n        {{__news_feed__}}\n      </div>\n    </div>\n    '),this.api=new s,this.store=t,this.totalPages=1,this.pageSize=10}async render(){this.store.currentPage=Number(location.hash.substring(7)),this.store.hasFeeds||(this.store.setFeeds(await this.api.getData()),this.totalPages=Math.floor(this.store.numberOfFeed/this.pageSize)+(this.store.numberOfFeed%this.pageSize>0?1:0));let e=this.store.currentPage-1;for(let t=e*this.pageSize;t<(e+1)*this.pageSize;t++){const{id:e,title:s,comments_count:a,user:n,points:i,time_ago:r,read:d}=this.store.getFeed(t);this.addHtml(`\n      <div class="p-6 ${d?"bg-red":"bg-white"} mt-6 rounded-lg shadow-md transition-colors duration-500 hover:bg-green-100">\n      <div class="flex">\n      <div class="flex-auto">\n      <a href="#/show/${e}">${s}</a>\n          </div>\n          <div class="text-center text-sm">\n            <div class="w-10 text-white bg-green-300 rounded-lg px-0 py-2">${a}</div>\n          </div>\n        </div>\n        <div class="flex mt-3">\n          <div class="grid grid-cols-3 text-sm text-gray-500">\n            <div><i class="fas fa-user mr-1"></i>${n}</div>\n            <div><i class="fas fa-heart mr-1"></i>${i}</div>\n            <div><i class="fas fa-clock mr-1"></i>${r}</div>\n          </div>\n        </div>\n      </div>\n      `)}this.setTemplatedata("news_feed",this.getHtml()),this.setTemplatedata("prev_page",`<a href="#/page/${this.store.prevPage}" class="${this.store.currentPage>1?"text-gray-500":"pointer-events-none text-gray-200"}">Previous</a>`),this.setTemplatedata("next_page",`<a href="#/page/${this.store.nextPage}" class="ml-4 ${this.store.currentPage<this.totalPages?"text-gray-500":"pointer-events-none text-gray-200"}">Next</a>`),this.updateView()}}("root",i),o=new class extends e{constructor(e,t){super(e,'\n    <div class="bg-gray-600 min-h-screen">\n      <div class="bg-white text-xl">\n        <div class="mx-auto px-4">\n          <div class="flex justify-between items-center py-6">\n            <div class="flex justify-start">\n              <h1 class="font-extrabold">Hacker News</h1>\n            </div>\n            <div class="item-center justify-end">\n              <a href="#/page/{{__current_page__}}" class="text-gray-500">\n                <i class="fa fa-times"></i>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="h-full border rounded-xl bg-white m-6 p-4">\n        <h2>{{__title__}}</h2>\n        <div class="text-gray-400 h-20">\n          {{__content__}}\n        </div>\n\n        {{__comments__}}\n\n      </div>\n    </div>\n  '),this.api=new a,this.store=t}async render(){const e=location.hash.substring(7),{title:t,content:s,comments:a}=await this.api.getData(e);this.store.makeRead(Number(e)),this.setTemplatedata("comments",this.makeComment(a)),this.setTemplatedata("current_page",String(this.store.currentPage)),this.setTemplatedata("title",t),this.setTemplatedata("content",s),this.updateView()}makeComment(e){for(let t=0;t<e.length;t++){const s=e[t];this.addHtml(`\n        <div style="padding-left: ${40*s.level}px;" class="mt-4">\n           <div class="text-gray-400">\n            <i class="fa fa-sort-up mr-2"></i>\n            <strong>${s.user}</strong> ${s.time_ago}\n          </div>\n          <p class="text-gray-700">${s.content}</p>\n        </div>\n      `),s.comments.length>0&&this.addHtml(this.makeComment(s.comments))}return this.getHtml()}}("root",i);r.setDefaultPage(d),r.addRoutePath("/page/",d),r.addRoutePath("/show/",o),r.route();
//# sourceMappingURL=index.826ace82.js.map
